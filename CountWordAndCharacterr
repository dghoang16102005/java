import java.util.HashMap;
import java.util.Map;
import java.util.Scanner;

public class TextAnalyzer {

    /**
     * Ki·ªÉm tra chu·ªói ch·ªâ ch·ª©a ch·ªØ c√°i v√† kho·∫£ng tr·∫Øng (kh√¥ng c√≥ k√Ω t·ª± ƒë·∫∑c bi·ªát, s·ªë, d·∫•u c√¢u)
     */
    public static boolean isValidInput(String input) {
        return input.matches("[a-zA-Z\\s]+");
    }

    /**
     * ƒê·∫øm s·ªë l·∫ßn xu·∫•t hi·ªán c·ªßa m·ªói t·ª´
     */
    public static Map<String, Integer> countWords(String input) {
        Map<String, Integer> wordCount = new HashMap<>();
        String[] words = input.toLowerCase().trim().split("\\s+");

        for (String word : words) {
            wordCount.put(word, wordCount.getOrDefault(word, 0) + 1);
        }

        return wordCount;
    }

    /**
     * ƒê·∫øm s·ªë l·∫ßn xu·∫•t hi·ªán c·ªßa m·ªói k√Ω t·ª± (b·ªè qua kho·∫£ng tr·∫Øng)
     */
    public static Map<Character, Integer> countCharacters(String input) {
        Map<Character, Integer> charCount = new HashMap<>();
        String cleaned = input.toLowerCase().replaceAll("\\s+", "");

        for (char ch : cleaned.toCharArray()) {
            charCount.put(ch, charCount.getOrDefault(ch, 0) + 1);
        }

        return charCount;
    }

    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        System.out.println("Nh·∫≠p m·ªôt chu·ªói kh√¥ng ch·ª©a k√Ω t·ª± ƒë·∫∑c bi·ªát:");

        String input = scanner.nextLine();

        // VALIDATION
        if (!isValidInput(input)) {
            System.out.println("‚ùå Chu·ªói kh√¥ng h·ª£p l·ªá. Ch·ªâ ƒë∆∞·ª£c ch·ª©a ch·ªØ c√°i v√† kho·∫£ng tr·∫Øng.");
            return;
        }

        // ƒê·∫øm t·ª´
        Map<String, Integer> wordFrequency = countWords(input);
        System.out.println("\nüìä S·ªë l·∫ßn xu·∫•t hi·ªán c·ªßa t·ª´ng t·ª´:");
        wordFrequency.forEach((word, count) ->
                System.out.println("T·ª´ \"" + word + "\": " + count + " l·∫ßn"));

        // ƒê·∫øm k√Ω t·ª±
        Map<Character, Integer> charFrequency = countCharacters(input);
        System.out.println("\nüìä S·ªë l·∫ßn xu·∫•t hi·ªán c·ªßa t·ª´ng k√Ω t·ª±:");
        charFrequency.forEach((ch, count) ->
                System.out.println("K√Ω t·ª± '" + ch + "': " + count + " l·∫ßn"));
    }
}
